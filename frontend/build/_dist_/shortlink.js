var c=(n,o,t)=>new Promise((r,e)=>{var h=s=>{try{a(t.next(s))}catch(i){e(i)}},j=s=>{try{a(t.throw(s))}catch(i){e(i)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(h,j);a((t=t.apply(n,o)).next())});export default class{constructor(n,o="https://aka.186526.xyz/api/jsonrpc"){this.jsonrpc=o,this.link=n}create(n){return c(this,null,function*(){const o=new URL(this.jsonrpc).origin;let t={json:{jsonrpc:"2.0",id:Math.floor(Math.random()*300),method:"create",params:{name:n,url:this.link}}};t.text=JSON.stringify(t.json);let r={raw:yield fetch(this.jsonrpc,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-Requested-With":"API From AKA.186526.XYZ"},body:t.text})};if(r.json=yield r.raw.json(),r.json.id!==t.json.id&&console.warn("Shortlink Create Warn,ID is not correct"),r.json.result[0]=="/"){const e=o+r.json.result;return e}else new Error(r.json.result)})}random(){return c(this,null,function*(){return this.create(Math.random().toString(36).substr(2),this.url,this.jsonrpc)})}}
